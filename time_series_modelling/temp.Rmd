```{r}
library(tidyverse)
library(tsibble)
library(rvg)
library(officer)
library(gganimate)

theme_set(theme_light())
```


```{r}
incidence_full <- read_csv("../incidence_full.csv") %>%
  mutate(week_admitted = yearweek(date_admitted))

incidence_full
```


```{r fig.width=10}
p1_df <- incidence_full %>%
  group_by(week_admitted) %>%
  tally() %>%
  mutate(frame = "p1")

p1 <- p1_df %>%
  ggplot() +
  geom_step(aes(x = week_admitted, y = n)) +
  scale_x_yearweek(
    "Week admitted",
    breaks = as.Date(as.character(2000:2023), format = "%Y"),
    date_labels = "%Y"
  ) +
  scale_y_continuous("Case admission") +
  ggtitle("Weekly dengue case admission in HCMC (out-patient + in-patient")
p1
```

```{r fig.width=10}
p2_df <- incidence_full %>%
  filter(status == "in-patient") %>%
  group_by(week_admitted) %>%
  tally() %>%
  mutate(frame = "p2")

p2 <- p2_df %>%
  ggplot() +
  geom_step(aes(x = week_admitted, y = n)) +
  scale_x_yearweek(
    "Week admitted",
    breaks = as.Date(as.character(2000:2023), format = "%Y"),
    date_labels = "%Y"
  ) +
  scale_y_continuous("Case admission")
p2
```
